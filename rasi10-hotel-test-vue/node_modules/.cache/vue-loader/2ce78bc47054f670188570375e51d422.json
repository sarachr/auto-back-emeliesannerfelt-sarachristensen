{"remainingRequest":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/src/views/Bill.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/src/views/Bill.vue","mtime":1602609006981},{"path":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/teau/Desktop/cypress-demo-vue-project/rasi10-hotel-test-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IGNoZWNrTG9nZ2VkSW4sIGdldEJpbGwsIGNyZWF0ZUJpbGwsIGVkaXRCaWxsLCBkZWxldGVCaWxsIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknCmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZScKaW1wb3J0IENoZWNrQm94IGZyb20gJ0AvY29tcG9uZW50cy9DaGVja0JveC52dWUnCgpAQ29tcG9uZW50KHsKCWNvbXBvbmVudHM6IHsgTG9hZGluZywgQ2hlY2tCb3ggfQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBCaWxsIGV4dGVuZHMgVnVlIHsKCXB1YmxpYyBsb2FkaW5nOiBib29sZWFuID0gZmFsc2UKCXB1YmxpYyBzYXZpbmc6IGJvb2xlYW4gPSBmYWxzZQoJcHVibGljIGRlbGV0aW5nOiBib29sZWFuID0gZmFsc2UKCXB1YmxpYyBiaWxsID0gbnVsbAoJcHVibGljIGVycm9yczogc3RyaW5nW10gPSBbXQoJcHVibGljIGRpcnR5OiBib29sZWFuID0gZmFsc2UKCglwcml2YXRlIGFzeW5jIGNyZWF0ZWQoKSB7CgkJaWYgKGNoZWNrTG9nZ2VkSW4oKSkgewoJCQlpZiAodGhpcy5tb2RlID09PSAnY3JlYXRlJykgewoJCQkJdGhpcy5iaWxsID0ge30KCQkJfSBlbHNlIHsKCQkJCXRoaXMubG9hZGluZyA9IHRydWUKCQkJCXRoaXMuYmlsbCA9IGF3YWl0IGdldEJpbGwodGhpcy4kcm91dGUucGFyYW1zLmlkKQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UKCQkJfQoJCX0KCX0KCglwdWJsaWMgZ2V0IG1vZGUoKSB7CgkJcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gJ25ldycgPyAnY3JlYXRlJyA6ICdlZGl0JwoJfQoKCXByaXZhdGUgdmFsaWF0ZSgpIHsKCQl0aGlzLmVycm9ycyA9IFtdCgkJaWYgKHRoaXMuYmlsbC52YWx1ZSA+PSAxMDAwMDAwMDAwKSB7CgkJCXRoaXMuZXJyb3JzLnB1c2goJ1ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAwMDAwMDAnKQoJCX0gZWxzZSBpZiAodGhpcy5iaWxsLnZhbHVlIDw9IDApIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnVmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpCgkJfSBlbHNlIGlmIChwYXJzZUZsb2F0KHRoaXMuYmlsbC52YWx1ZSkgJSAxICE9PSAwKSB7CgkJCXRoaXMuZXJyb3JzLnB1c2goJ1ZhbHVlIG11c3QgYmUgYSB3aG9sZSBudW1iZXInKQoJCX0KCQlyZXR1cm4gdGhpcy5lcnJvcnMubGVuZ3RoID09PSAwCgl9CgoJQFdhdGNoKCdiaWxsJywgeyBkZWVwOiB0cnVlIH0pCglwcml2YXRlIGNsZWFyRXJyb3JzKCkgewoJCWlmICh0aGlzLmRpcnR5KSB7CgkJCXRoaXMudmFsaWF0ZSgpCgkJfQoJfQoKCXB1YmxpYyBhc3luYyBzYXZlKCkgewoJCXRoaXMuZGlydHkgPSB0cnVlCgkJaWYgKCF0aGlzLnZhbGlhdGUoKSkgewoJCQlyZXR1cm4gZmFsc2UKCQl9CgkJdGhpcy5zYXZpbmcgPSB0cnVlCgkJaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHsKCQkJdGhpcy5iaWxsID0gYXdhaXQgY3JlYXRlQmlsbCh0aGlzLmJpbGwpCgkJfSBlbHNlIHsKCQkJdGhpcy5iaWxsID0gYXdhaXQgZWRpdEJpbGwodGhpcy5iaWxsLmlkLCB0aGlzLmJpbGwpCgkJfQoJCXRoaXMuJHJvdXRlci5wdXNoKCcvYmlsbHMnKQoJfQoKCXB1YmxpYyBhc3luYyByZW1vdmUoKSB7CgkJdGhpcy5kZWxldGluZyA9IHRydWUKCQlhd2FpdCBkZWxldGVCaWxsKHRoaXMuYmlsbC5pZCkKCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2JpbGxzJykKCX0KCn0K"},{"version":3,"sources":["Bill.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"Bill.vue","sourceRoot":"src/views","sourcesContent":["<script lang=\"ts\">\n\timport { Component, Vue, Watch } from 'vue-property-decorator'\n\timport { checkLoggedIn, getBill, createBill, editBill, deleteBill } from '@/services/api'\n\timport Loading from '@/components/Loading.vue'\n\timport CheckBox from '@/components/CheckBox.vue'\n\n\t@Component({\n\t\tcomponents: { Loading, CheckBox }\n\t})\n\texport default class Bill extends Vue {\n\t\tpublic loading: boolean = false\n\t\tpublic saving: boolean = false\n\t\tpublic deleting: boolean = false\n\t\tpublic bill = null\n\t\tpublic errors: string[] = []\n\t\tpublic dirty: boolean = false\n\n\t\tprivate async created() {\n\t\t\tif (checkLoggedIn()) {\n\t\t\t\tif (this.mode === 'create') {\n\t\t\t\t\tthis.bill = {}\n\t\t\t\t} else {\n\t\t\t\t\tthis.loading = true\n\t\t\t\t\tthis.bill = await getBill(this.$route.params.id)\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic get mode() {\n\t\t\treturn this.$route.params.id === 'new' ? 'create' : 'edit'\n\t\t}\n\n\t\tprivate valiate() {\n\t\t\tthis.errors = []\n\t\t\tif (this.bill.value >= 1000000000) {\n\t\t\t\tthis.errors.push('Value must be less than 1000000000')\n\t\t\t} else if (this.bill.value <= 0) {\n\t\t\t\tthis.errors.push('Value must be greater than 0')\n\t\t\t} else if (parseFloat(this.bill.value) % 1 !== 0) {\n\t\t\t\tthis.errors.push('Value must be a whole number')\n\t\t\t}\n\t\t\treturn this.errors.length === 0\n\t\t}\n\n\t\t@Watch('bill', { deep: true })\n\t\tprivate clearErrors() {\n\t\t\tif (this.dirty) {\n\t\t\t\tthis.valiate()\n\t\t\t}\n\t\t}\n\n\t\tpublic async save() {\n\t\t\tthis.dirty = true\n\t\t\tif (!this.valiate()) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tthis.saving = true\n\t\t\tif (this.mode === 'create') {\n\t\t\t\tthis.bill = await createBill(this.bill)\n\t\t\t} else {\n\t\t\t\tthis.bill = await editBill(this.bill.id, this.bill)\n\t\t\t}\n\t\t\tthis.$router.push('/bills')\n\t\t}\n\n\t\tpublic async remove() {\n\t\t\tthis.deleting = true\n\t\t\tawait deleteBill(this.bill.id)\n\t\t\tthis.$router.push('/bills')\n\t\t}\n\n\t}\n</script>\n\n<template>\n\t<div class=\"container\">\n\t\t<h2>\n\t\t\t<div v-if=\"mode === 'create'\">New Bill</div>\n\t\t\t<div v-if=\"mode === 'edit'\">Bill: {{ $route.params.id }}</div>\n\t\t\t<a v-if=\"mode === 'edit'\" class=\"btn red\" @click=\"remove\">{{ deleting ? '...' : 'Delete' }}</a>\n\t\t</h2>\n\t\t<Loading v-if=\"loading\" />\n\t\t<div v-if=\"!loading\">\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\n\t\t\t\t<label>ID</label>\n\t\t\t\t<input type=\"text\" disabled :value=\"bill.id\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\n\t\t\t\t<label>Created</label>\n\t\t\t\t<input type=\"text\" disabled :value=\"bill.created\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label>Value (SEK)</label>\n\t\t\t\t<input type=\"number\" v-model=\"bill.value\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label>Paid</label>\n\t\t\t\t<CheckBox v-model=\"bill.paid\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"error\" v-for=\"(error, i) in errors\" :key=\"i\">{{ error }}</div>\n\t\t<div class=\"actions\">\n\t\t\t<router-link class=\"btn\" to=\"/bills\">Back</router-link>\n\t\t\t<a class=\"btn blue\" @click=\"save\">{{ saving ? '...' : 'Save' }}</a>\n\t\t</div>\n\t</div>\n</template>\n\n<style lang=\"scss\" scoped>\n\th2 {\n\t\tposition: relative;\n\t\ta {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tright: 0;\n\t\t}\n\t}\n\t.actions {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t}\n</style>\n"]}]}